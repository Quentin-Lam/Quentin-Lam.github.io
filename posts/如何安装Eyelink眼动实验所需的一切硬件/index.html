<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="如何安装Eyelink眼动实验所需的一切硬件" /><meta name="author" content="Quentin Lam" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="Eyelink 1000 Plus 眼动仪是眼动研究中重要的研究设备。本文将从软件安装，硬件配置，到上手校准3个方面来帮助大家理解眼动实验的每个步骤。" /><meta property="og:description" content="Eyelink 1000 Plus 眼动仪是眼动研究中重要的研究设备。本文将从软件安装，硬件配置，到上手校准3个方面来帮助大家理解眼动实验的每个步骤。" /><link rel="canonical" href="https://quentin-lam.github.io//posts/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6/" /><meta property="og:url" content="https://quentin-lam.github.io//posts/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6/" /><meta property="og:site_name" content="乾堃道" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-08-02T05:14:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="如何安装Eyelink眼动实验所需的一切硬件" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Quentin Lam"},"dateModified":"2023-08-04T03:24:34+00:00","datePublished":"2023-08-02T05:14:00+00:00","description":"Eyelink 1000 Plus 眼动仪是眼动研究中重要的研究设备。本文将从软件安装，硬件配置，到上手校准3个方面来帮助大家理解眼动实验的每个步骤。","headline":"如何安装Eyelink眼动实验所需的一切硬件","mainEntityOfPage":{"@type":"WebPage","@id":"https://quentin-lam.github.io//posts/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6/"},"url":"https://quentin-lam.github.io//posts/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6/"}</script><title>如何安装Eyelink眼动实验所需的一切硬件 | 乾堃道</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="乾堃道"><meta name="application-name" content="乾堃道"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/config/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">乾堃道</a></div><div class="site-subtitle font-italic">这里是乾堃道的博客～</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Quentin-Lam" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['quentin_lam','mail.bnu.edu.cn'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>如何安装Eyelink眼动实验所需的一切硬件</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>如何安装Eyelink眼动实验所需的一切硬件</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1690953240" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2023/08/02 </em> </span> <span> 更新于 <em class="" data-ts="1691119474" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2023/08/04 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> <a href=""></a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3174 字"> <em>17 分钟</em>阅读</span></div></div></div><div class="post-content"><p>Eyelink 1000 Plus 眼动仪是眼动研究中重要的研究设备。本文将从软件安装，硬件配置，到上手校准3个方面来帮助大家理解眼动实验的每个步骤。</p><h2 id="1-软件安装"><span class="mr-2">1. 软件安装</span><a href="#1-软件安装" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h5 id="首先不管我们是用什么软件进行试验我们都需要去eyelink的官网httpswwwsr-researchcomsupport安装所需的组件网页界面如下"><span class="mr-2">首先，不管我们是用什么软件进行试验，我们都需要去Eyelink的官网(https://www.sr-research.com/support/)安装所需的组件，网页界面如下：</span><a href="#首先不管我们是用什么软件进行试验我们都需要去eyelink的官网httpswwwsr-researchcomsupport安装所需的组件网页界面如下" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135626512.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135626512.png" alt="image-20230802135626512" class="lazyload" data-proofer-ignore></a></p><h5 id="注册完注意查收自己的邮箱点击链接完成验证完成验证后回到支援网站会提示你已经验证成功"><span class="mr-2">注册完注意查收自己的邮箱点击链接完成验证。完成验证后，回到支援网站，会提示你已经验证成功。</span><a href="#注册完注意查收自己的邮箱点击链接完成验证完成验证后回到支援网站会提示你已经验证成功" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135714852.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135714852.png" alt="image-20230802135714852" style="zoom:25%;" class="lazyload" data-proofer-ignore></a></p><h5 id="需要注意的是注册完成后账户不会立马激活可能要等一天才行"><span class="mr-2">需要注意的是，注册完成后账户不会立马激活，可能要等一天才行。</span><a href="#需要注意的是注册完成后账户不会立马激活可能要等一天才行" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135730384.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135730384.png" alt="image-20230802135730384" style="zoom:50%;" class="lazyload" data-proofer-ignore></a></p><h5 id="激活后会有邮件提示"><span class="mr-2">激活后会有邮件提示。</span><a href="#激活后会有邮件提示" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135801729.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135801729.png" alt="image-20230802135801729" style="zoom: 25%;" class="lazyload" data-proofer-ignore></a></p><h5 id="注册完成后我们回到下载界面httpswwwsr-researchcomsupport就能看到eyelink的论坛被解锁啦"><span class="mr-2">注册完成后，我们回到下载界面（https://www.sr-research.com/support/），就能看到Eyelink的论坛被解锁啦~</span><a href="#注册完成后我们回到下载界面httpswwwsr-researchcomsupport就能看到eyelink的论坛被解锁啦" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135822126.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802135822126.png" alt="image-20230802135822126" class="lazyload" data-proofer-ignore></a></p><h3 id="11-安装psychopy"><span class="mr-2">1.1 安装Psychopy</span><a href="#11-安装psychopy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h5 id="因为我是用python编写的实验所以这里我选择下载python相关的组件psychopy下载地址httpswwwpsychopyorgdownloadhtml-安装完毕后再安装visual-studio-codehttpscodevisualstudiocomdownload-"><span class="mr-2">因为我是用python编写的实验，所以这里我选择下载python相关的组件。Psychopy下载地址：https://www.psychopy.org/download.html 。安装完毕后再安装Visual Studio Code：https://code.visualstudio.com/Download 。</span><a href="#因为我是用python编写的实验所以这里我选择下载python相关的组件psychopy下载地址httpswwwpsychopyorgdownloadhtml-安装完毕后再安装visual-studio-codehttpscodevisualstudiocomdownload-" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802140007331.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802140007331.png" alt="image-20230802140007331" class="lazyload" data-proofer-ignore></a></p><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802140028603.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802140028603.png" alt="image-20230802140028603" class="lazyload" data-proofer-ignore></a></p><h5 id="之后回到support-forum-httpswwwsr-researchcomsupport选择下载developer-kit-和-pylink-download"><span class="mr-2">之后回到Support Forum (https://www.sr-research.com/support/)，选择下载Developer Kit 和 Pylink Download。</span><a href="#之后回到support-forum-httpswwwsr-researchcomsupport选择下载developer-kit-和-pylink-download" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><h5 id="pylink-download-可直接输入以下命令"><span class="mr-2">Pylink Download 可直接输入以下命令：</span><a href="#pylink-download-可直接输入以下命令" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">py</span> <span class="o">-</span><span class="mf">3.8</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">index</span><span class="o">-</span><span class="n">url</span><span class="o">=</span><span class="n">https</span><span class="o">:</span><span class="c1">//pypi.sr-support.com sr-research-pylink</span>
<span class="cp"># 安装显卡驱动呈现刺激(视情况安装)
</span><span class="n">py</span> <span class="o">-</span><span class="mf">3.8</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">pyopengl</span> 
</pre></table></code></div></div><p>（如果安装的是其他版本的python就要把3.8替换为对应的版本数字）</p><h2 id="2-实验代码编写"><span class="mr-2">2. 实验代码编写</span><a href="#2-实验代码编写" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="21-vscode-python环境配置"><span class="mr-2">2.1 Vscode python环境配置</span><a href="#21-vscode-python环境配置" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h5 id="首先我们在vscode中安装python拓展"><span class="mr-2">首先，我们在vscode中安装python拓展。</span><a href="#首先我们在vscode中安装python拓展" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802142453317.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802142453317.png" alt="image-20230802142453317" style="zoom: 50%;" class="lazyload" data-proofer-ignore></a></p><p>在菜单右下角查看自己的python是否已经载入（我这里显示的版本是3.8.8）</p><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802142600672.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802142600672.png" alt="image-20230802142600672" class="lazyload" data-proofer-ignore></a></p><h2 id="被试机呈现刺激的电脑硬件配置"><span class="mr-2">被试机（呈现刺激的电脑）硬件配置：</span><a href="#被试机呈现刺激的电脑硬件配置" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h5 id="记得眼动仪主试机被试机主试机要连两条网线连好后要将被试机电脑的ip改成10011不知道怎么改可参考网站链接"><span class="mr-2">记得，眼动仪——主试机，被试机——主试机要连两条网线，连好后要将被试机电脑的IP改成100.1.1，不知道怎么改可参考网站链接：</span><a href="#记得眼动仪主试机被试机主试机要连两条网线连好后要将被试机电脑的ip改成10011不知道怎么改可参考网站链接" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p>https://www.sr-support.com/showthread.php?tid=281</p><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802152429293.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230802152429293.png" alt="image-20230802152429293" class="lazyload" data-proofer-ignore></a></p><h3 id="实验代码"><span class="mr-2">实验代码：</span><a href="#实验代码" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h5 id="首先导入应该要导入的包并建立中文utf-8环境"><span class="mr-2">首先，导入应该要导入的包并建立中文<code class="language-plaintext highlighter-rouge">utf-8</code>环境</span><a href="#首先导入应该要导入的包并建立中文utf-8环境" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="c1">#!/usr/bin/env python
# -*- coding: utf-8 -*-
</span><span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">sys</span>
<span class="c1"># math is for calculating visual angle
</span><span class="kn">from</span> <span class="n">math</span> <span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">atan</span><span class="p">,</span> <span class="n">hypot</span>
<span class="kn">import</span> <span class="n">random</span>
<span class="kn">import</span> <span class="n">pylink</span> <span class="c1"># we should have installed it before
</span>
<span class="c1"># This is for using animation for calibration, If not needed, we can comment out it. This isn't a standard package from python, we need to cite where it is for python to find it
</span><span class="n">sys</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="sh">'</span><span class="s">C:/Users/20191/Desktop/ldk/6 yuan/exp_code</span><span class="sh">'</span><span class="p">)</span> <span class="c1"># The path where my .py module file is
</span><span class="kn">from</span> <span class="n">EyeLinkCoreGraphicsPsychoPyAnimatedTarget</span> <span class="kn">import</span> <span class="n">EyeLinkCoreGraphicsPsychoPy</span>

<span class="c1"># import psychopy for stimulation presentation
</span><span class="kn">from</span> <span class="n">psychopy</span> <span class="kn">import</span> <span class="n">visual</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">monitors</span>
<span class="kn">from</span> <span class="n">psychopy.constants</span> <span class="kn">import</span> <span class="n">STOPPED</span><span class="p">,</span> <span class="n">PLAYING</span>
<span class="c1"># for preparing the Host backdrop image
</span><span class="kn">from</span> <span class="n">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="c1"># 切换输入法，没有这个包的话pip install
</span><span class="kn">import</span> <span class="n">pyautogui</span>
<span class="c1"># Specify the font dictionary to override default font paths
# copy your font file to the same directory of your exp file
</span><span class="kn">import</span> <span class="n">pyglet</span>
<span class="n">exp_dir</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
<span class="n">os</span><span class="p">.</span><span class="nf">chdir</span><span class="p">(</span><span class="n">exp_dir</span><span class="p">)</span>
<span class="n">font_name</span> <span class="o">=</span> <span class="sh">'</span><span class="s">kaiu.ttf</span><span class="sh">'</span>
<span class="n">pyglet</span><span class="p">.</span><span class="n">font</span><span class="p">.</span><span class="nf">add_file</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">exp_dir</span><span class="p">,</span> <span class="n">font_name</span><span class="p">))</span>
</pre></table></code></div></div><h5 id="为了方便大家理解eyelinkcoregraphicspsychopyanimatedtarget就是这样一个py文件"><span class="mr-2">为了方便大家理解，<code class="language-plaintext highlighter-rouge">EyeLinkCoreGraphicsPsychoPyAnimatedTarget</code>就是这样一个.py文件</span><a href="#为了方便大家理解eyelinkcoregraphicspsychopyanimatedtarget就是这样一个py文件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230803134114270.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/image-20230803134114270.png" alt="image-20230803134114270" style="zoom:67%;" class="lazyload" data-proofer-ignore></a></p><h5 id="然后我们可以输入一些硬件方面的信息需要根据刺激呈现屏幕调整需手动测量放在前面是为了方便以后修改"><span class="mr-2">然后，我们可以输入一些硬件方面的信息（需要根据刺激呈现屏幕调整，需手动测量），放在前面是为了方便以后修改。</span><a href="#然后我们可以输入一些硬件方面的信息需要根据刺激呈现屏幕调整需手动测量放在前面是为了方便以后修改" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1"># set a few constants
</span><span class="n">scrWidth</span> <span class="o">=</span> <span class="mf">37.5</span> <span class="c1"># measured in cm
</span><span class="n">scrHeight</span> <span class="o">=</span> <span class="mi">30</span>

<span class="c1"># The resolution of presenting screen
</span><span class="n">scnSize</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">]</span> 
<span class="n">pw</span><span class="o">=</span><span class="n">scnSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># screen width measured by pixels
</span><span class="n">ph</span><span class="o">=</span><span class="n">scnSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">viewDist</span> <span class="o">=</span> <span class="mi">66</span> <span class="c1"># The viewing distance from chin rest to the screen (cm)
# the formula to calculate visual angles
</span><span class="n">deg2pix</span> <span class="o">=</span> <span class="nf">int</span><span class="p">((</span><span class="n">scnSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nf">atan</span><span class="p">(</span><span class="n">scrWidth</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">/</span> <span class="n">viewDist</span><span class="p">)</span> <span class="o">*</span> <span class="mf">180.0</span> <span class="o">/</span> <span class="n">pi</span><span class="p">))</span>  

<span class="c1"># stim size
</span><span class="n">V_w</span> <span class="o">=</span> <span class="mi">9</span> <span class="c1"># measured in visual angles
</span><span class="n">V_h</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">V_w</span> <span class="o">*</span> <span class="mi">300</span> <span class="o">/</span> <span class="mi">260</span><span class="p">)</span> <span class="c1"># make sure that different sizes of stim keeps the same shape
</span><span class="n">pix_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">V_w</span> <span class="o">*</span> <span class="n">deg2pix</span><span class="p">,</span> <span class="n">V_h</span> <span class="o">*</span> <span class="n">deg2pix</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">The the width of the stimulus is </span><span class="si">{</span><span class="n">V_w</span><span class="si">}</span><span class="s"> and the height is </span><span class="si">{</span><span class="n">V_h</span><span class="si">}</span><span class="s">, and the pixel size of it is </span><span class="si">{</span><span class="n">pix_size</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><h5 id="然后我们可以设置一些眼动仪相关的参数"><span class="mr-2">然后，我们可以设置一些眼动仪相关的参数。</span><a href="#然后我们可以设置一些眼动仪相关的参数" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c1"># eye-selection global options
</span><span class="n">RIGHT_EYE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">LEFT_EYE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">BINOCULAR</span> <span class="o">=</span> <span class="mi">2</span>

<span class="c1"># Initialize EyeLink and the Graphics
</span><span class="n">eyelinktracker</span> <span class="o">=</span> <span class="n">pylink</span><span class="p">.</span><span class="nc">EyeLink</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">eyelinktracker</span><span class="p">:</span>
	<span class="nf">print </span><span class="p">(</span><span class="sh">"</span><span class="s">EL is None</span><span class="sh">"</span><span class="p">)</span>
	<span class="n">sys</span><span class="p">.</span><span class="nf">exit</span><span class="p">()</span>
<span class="sh">"""</span><span class="s"> if not dummyMode: 
	tk = pylink.EyeLink(</span><span class="sh">'</span><span class="s">100.1.1.1</span><span class="sh">'</span><span class="s">)
else:
	tk = pylink.EyeLink(None) </span><span class="sh">"""</span>
<span class="n">tk</span> <span class="o">=</span> <span class="n">pylink</span><span class="p">.</span><span class="nc">EyeLink</span><span class="p">(</span><span class="sh">'</span><span class="s">100.1.1.1</span><span class="sh">'</span><span class="p">)</span>
</pre></table></code></div></div><h5 id="如果眼动仪启动成功我们便可以开始收集被试信息"><span class="mr-2">如果眼动仪启动成功，我们便可以开始收集被试信息。</span><a href="#如果眼动仪启动成功我们便可以开始收集被试信息" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre><td class="rouge-code"><pre><span class="c1"># get subj info
</span><span class="k">def</span> <span class="nf">getSubjInfo</span><span class="p">():</span>
    <span class="n">pyautogui</span><span class="p">.</span><span class="nf">keyDown</span><span class="p">(</span><span class="sh">'</span><span class="s">shift</span><span class="sh">'</span><span class="p">)</span>
	<span class="n">pyautogui</span><span class="p">.</span><span class="nf">keyUp</span><span class="p">(</span><span class="sh">'</span><span class="s">shift</span><span class="sh">'</span><span class="p">)</span>
	<span class="n">ID</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="nf">input</span><span class="p">(</span><span class="sh">'</span><span class="s">Subject ID: </span><span class="sh">'</span><span class="p">))</span>
    <span class="c1"># # You can add and delete whatever you like
</span>	<span class="c1"># Name = raw_input('Subject Name: ')
</span>	<span class="c1"># Gender = raw_input('Subject Gender: ')
</span>	<span class="n">Age</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="nf">input</span><span class="p">(</span><span class="sh">'</span><span class="s">Age: </span><span class="sh">'</span><span class="p">))</span>
	<span class="k">return</span> <span class="p">[</span><span class="n">ID</span><span class="p">,</span> <span class="n">Age</span><span class="p">]</span>



<span class="k">def</span> <span class="nf">init_data_file</span><span class="p">(</span><span class="n">SUBJ_INFO</span><span class="p">):</span>
	<span class="sh">"""</span><span class="s"> define a function that initializes the data file and get sub_info</span><span class="sh">"""</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">exists</span><span class="p">(</span><span class="sh">'</span><span class="s">csv_data_DotFace</span><span class="sh">'</span><span class="p">):</span> 
		<span class="n">os</span><span class="p">.</span><span class="nf">mkdir</span><span class="p">(</span><span class="sh">'</span><span class="s">csv_data_DotFace</span><span class="sh">'</span><span class="p">)</span>
    <span class="c1"># join everything in the SUBJ_INFO seperated by "_"
</span>	<span class="n">file_name</span> <span class="o">=</span> <span class="sh">'</span><span class="s">csv_data_DotFace/</span><span class="sh">'</span> <span class="o">+</span> <span class="sh">"</span><span class="s">_</span><span class="sh">"</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">SUBJ_INFO</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="s">.csv</span><span class="sh">'</span>
	<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_file</span><span class="p">:</span>
		<span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">subj</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">trial</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">dot_pos</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Lstim</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Rstim</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">stim_st</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">stim_et</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">LoEp</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">cue_pos</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">key_press</span><span class="sh">'</span><span class="p">]</span>
        <span class="c1"># this behavorial csv data should contain the info of every trial. Please add or delete things in it if needed
</span>		<span class="n">data_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">'</span><span class="se">\t</span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">header</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">data_file</span>

<span class="c1">## initialize the data files.
</span><span class="n">subjInfo</span> <span class="o">=</span> <span class="nf">getSubjInfo</span><span class="p">()</span>
<span class="n">DATA_FILE</span> <span class="o">=</span> <span class="nf">init_data_file</span><span class="p">(</span><span class="n">subjInfo</span><span class="p">)</span>
<span class="n">dataFolder</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="sh">'</span><span class="s">/your_experiment_name/</span><span class="sh">'</span> <span class="c1"># CHANGE IT ACCORDING TO YOU EXPERIMENT!
</span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">exists</span><span class="p">(</span><span class="n">dataFolder</span><span class="p">):</span> <span class="n">os</span><span class="p">.</span><span class="nf">makedirs</span><span class="p">(</span><span class="n">dataFolder</span><span class="p">)</span> <span class="c1"># create data folder if it's not there
</span><span class="n">edfFileName</span> <span class="o">=</span> <span class="sh">"</span><span class="s">_</span><span class="sh">"</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">subjInfo</span><span class="p">)</span>  <span class="o">+</span> <span class="sh">"</span><span class="s">.EDF</span><span class="sh">"</span> <span class="c1"># create .EDF file for storing eye-tracking data
</span><span class="n">tk</span><span class="p">.</span><span class="nf">openDataFile</span><span class="p">(</span><span class="n">edfFileName</span><span class="p">)</span>
</pre></table></code></div></div><h5 id="现在我们完成了数据文件的创造我们可以设计实验设计矩阵这里我们以点探测实验为例建立矩阵"><span class="mr-2">现在，我们完成了数据文件的创造，我们可以设计实验设计矩阵，这里我们以点探测实验为例建立矩阵。</span><a href="#现在我们完成了数据文件的创造我们可以设计实验设计矩阵这里我们以点探测实验为例建立矩阵" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre><td class="rouge-code"><pre><span class="c1"># prepare stim
</span><span class="n">script_path</span>  <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">abspath</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
<span class="n">proj_root</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">sep</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">script_path</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">sep</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># The trial list needs 5 variables, equals to: 
# cue_pos: the position of fixation point. 1:left, 2:right, 3:center
# LoEp: the location of the emotional picture. 1:left, 2:right
# dot_pos: the position of the pressing dot. 1:left, 2:right 
# stim_e: the picture name of the emotional pictures
# stim_n: the picture name of the neutral pictures
</span><span class="n">cue_pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">LoEp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">dot_pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="c1"># Define functions for generating trial lists
</span><span class="k">def</span> <span class="nf">generate_trial_list</span><span class="p">(</span><span class="n">cue_pos</span><span class="p">,</span> <span class="n">LoEp</span><span class="p">,</span> <span class="n">dot_pos</span><span class="p">,</span> <span class="n">stim_e</span><span class="p">,</span> <span class="n">stim_n</span><span class="p">):</span>
    <span class="n">trial_list_all</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cue_pos</span><span class="p">:</span>
    	<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">LoEp</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">dot_pos</span><span class="p">:</span>
                <span class="n">trial_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">stim_e</span><span class="p">)):</span>
                    <span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">stim_e</span><span class="p">[</span><span class="n">l</span><span class="p">],</span> <span class="n">stim_n</span><span class="p">[</span><span class="n">l</span><span class="p">]]</span>
                    <span class="n">trial_list</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span>
                <span class="n">trial_list_all</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">trial_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">trial_list_all</span>

<span class="c1"># Get the filenames for emotional and neutral stimuli
</span><span class="n">d_dir_ExpF</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">proj_root</span><span class="p">,</span> <span class="sh">'</span><span class="s">exp_stim/exp/f/</span><span class="sh">'</span><span class="p">)</span>
<span class="n">d_dir_ExpM</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">proj_root</span> <span class="o">+</span> <span class="sh">'</span><span class="s">exp_stim/exp/m/</span><span class="sh">'</span><span class="p">)</span>
<span class="n">d_dir_NF</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">proj_root</span><span class="p">,</span> <span class="sh">'</span><span class="s">exp_stim/N/f/</span><span class="sh">'</span><span class="p">)</span>
<span class="n">d_dir_NM</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">proj_root</span><span class="p">,</span> <span class="sh">'</span><span class="s">exp_stim/N/m/</span><span class="sh">'</span><span class="p">)</span>
<span class="n">d_dir_all</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">proj_root</span><span class="p">,</span> <span class="sh">'</span><span class="s">exp_stim/all/</span><span class="sh">'</span><span class="p">)</span>
<span class="n">file_name_ExpF</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">listdir</span><span class="p">(</span><span class="n">d_dir_ExpF</span><span class="p">)</span>
<span class="n">file_name_ExpM</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">listdir</span><span class="p">(</span><span class="n">d_dir_ExpM</span><span class="p">)</span>
<span class="n">file_name_NF</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">listdir</span><span class="p">(</span><span class="n">d_dir_NF</span><span class="p">)</span>
<span class="n">file_name_NM</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">listdir</span><span class="p">(</span><span class="n">d_dir_NM</span><span class="p">)</span>

<span class="n">file_name_Exp</span> <span class="o">=</span> <span class="n">file_name_ExpF</span> <span class="o">+</span> <span class="n">file_name_ExpM</span>
<span class="n">file_name_N</span> <span class="o">=</span> <span class="n">file_name_NF</span> <span class="o">+</span> <span class="n">file_name_NM</span>
<span class="c1"># print(file_name_Exp) # ['FF17.bmp', 'FF23.BMP', 'HF10.BMP', 'HF61.bmp', 'SF16.bmp', 'SF38.BMP', 'FM3.BMP', 'FM36.bmp', 'HM102.bmp', 'HM17.BMP', 'SM18.bmp', 'SM41.BMP']
# Generate the trial lists for different conditions
</span><span class="n">trial_list_rec</span> <span class="o">=</span> <span class="nf">generate_trial_list</span><span class="p">(</span><span class="n">cue_pos</span><span class="p">,</span> <span class="n">LoEp</span><span class="p">,</span> <span class="n">dot_pos</span><span class="p">,</span> <span class="n">file_name_Exp</span><span class="p">,</span> <span class="n">file_name_N</span><span class="p">)</span>
<span class="c1"># print(trial_list_rec[0], len(trial_list_rec)) # [1, 1, 1, 'FF17.bmp', 'NF15.bmp'], 144
</span></pre></table></code></div></div><h5 id="这个是本点探测范式试次的流程图"><span class="mr-2">这个是本点探测范式试次的流程图：</span><a href="#这个是本点探测范式试次的流程图" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><p><a href="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/%E6%96%B0%E5%8F%98%E5%BC%8F_%E8%8B%B1%E6%96%87.png" class="popup img-link "><img data-src="/assets/blog_res/2023-08-02-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6.assets/%E6%96%B0%E5%8F%98%E5%BC%8F_%E8%8B%B1%E6%96%87.png" alt="新变式_英文" class="lazyload" data-proofer-ignore></a></p><h5 id="以上都设置完了我们可以初始化屏幕并进入首次校准阶段"><span class="mr-2">以上都设置完了，我们可以初始化屏幕并进入首次校准阶段。</span><a href="#以上都设置完了我们可以初始化屏幕并进入首次校准阶段" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre><td class="rouge-code"><pre><span class="c1"># setup a display
</span><span class="n">mon</span> <span class="o">=</span> <span class="n">monitors</span><span class="p">.</span><span class="nc">Monitor</span><span class="p">(</span><span class="sh">'</span><span class="s">QL</span><span class="sh">'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">scrWidth</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="n">viewDist</span><span class="p">)</span> <span class="c1"># name the display with whatever you want
</span><span class="n">mon</span><span class="p">.</span><span class="nf">setSizePix</span><span class="p">((</span><span class="n">scnSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">scnSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

<span class="n">surf</span> <span class="o">=</span> <span class="n">visual</span><span class="p">.</span><span class="nc">Window</span><span class="p">((</span><span class="n">scnSize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">scnSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">fullscr</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="n">mon</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],</span> <span class="n">units</span><span class="o">=</span><span class="sh">'</span><span class="s">pix</span><span class="sh">'</span><span class="p">)</span> <span class="c1"># set up full screen and the background color
</span><span class="n">event</span><span class="p">.</span><span class="nc">Mouse</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c1"># hide the mouse
</span>
<span class="c1"># call the custom calibration routine "EyeLinkCoreGraphicsPsychopy.py", instead of the default routines that were implemented in SDL
</span>
<span class="c1"># Initiate the custon calibration routine
</span><span class="n">genv</span> <span class="o">=</span> <span class="nc">EyeLinkCoreGraphicsPsychoPy</span><span class="p">(</span><span class="n">tk</span><span class="p">,</span> <span class="n">surf</span><span class="p">)</span>

<span class="c1"># # to use a movie clip as the calibration target
#genv.calTarget = 'movie'
#genv.movieTargetFile = 'starjumps100.avi'
</span>
<span class="c1"># to use a rotating checkerboard as the calibration target
</span><span class="n">genv</span><span class="p">.</span><span class="n">calTarget</span> <span class="o">=</span> <span class="sh">'</span><span class="s">rotatingCheckerboard</span><span class="sh">'</span>

<span class="c1"># Open the graphics window to show custom calibration pic
</span><span class="n">pylink</span><span class="p">.</span><span class="nf">openGraphicsEx</span><span class="p">(</span><span class="n">genv</span><span class="p">)</span>
<span class="c1"># # If the previous doesn't works, use it
#pylink.openGraphics()
</span>
<span class="c1"># Flush keyboard
</span><span class="n">pylink</span><span class="p">.</span><span class="nf">flushGetkeyQueue</span><span class="p">()</span>
<span class="c1"># We need to put the tracker in offline mode before we change its configurations
</span><span class="n">tk</span><span class="p">.</span><span class="nf">setOfflineMode</span><span class="p">()</span>
<span class="c1">#pylink.setTargetSize(int(0.5*deg2pix), int(0.15*deg2pix))
#pylink.setCalibrationColors(black, gray)
</span>
<span class="c1">## Gets the display surface and sends a mesage to EDF file;
# set up sample rate
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">'</span><span class="s">sample_rate 500</span><span class="sh">'</span><span class="p">)</span>
<span class="c1"># record the exp pixel coordinates
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">"</span><span class="s">screen_pixel_coords =  0 0 %d %d</span><span class="sh">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">pw</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ph</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="c1"># sent it to the eye-tracker
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendMessage</span><span class="p">(</span><span class="sh">"</span><span class="s">DISPLAY_COORDS 0 0 %d %d</span><span class="sh">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">pw</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ph</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="c1"># specify the calibration type, H3, HV3, HV5, HV13 (HV = horiztonal/vertical), 
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">"</span><span class="s">calibration_type = HV5</span><span class="sh">"</span><span class="p">)</span> <span class="c1"># tk.setCalibrationType('HV9') also works, see the Pylink manual http://sr-research.jp/support/manual/EyeLink%20Programmers%20Guide.pdf
# specify the proportion of subject display to calibrate/validate (OPTIONAL, useful for wide screen monitors)
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">"</span><span class="s">calibration_area_proportion 0.75 0.7</span><span class="sh">"</span><span class="p">)</span>
<span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">"</span><span class="s">validation_area_proportion  0.75 0.7</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># Set the tracker to parse Events using "GAZE" (or "HREF") data
#tk.sendCommand("recording_parse_type = GAZE")
# online parsing configuration, 0 for ‘cognitive’, 1 for psychophysical, which is more sensitive to saccade
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">"</span><span class="s">select_parser_configuration 0</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># set up the viewing dist for eye-tracker
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="nf">format</span><span class="p">(</span><span class="sh">"</span><span class="s">simulation_screen_distance {viewDist}</span><span class="sh">"</span><span class="p">))</span>

<span class="c1"># edf contents
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">"</span><span class="s">file_sample_data  = LEFT,RIGHT,GAZE,AREA,GAZERES,STATUS,HTARGET</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># set link data (used for gaze cursor) 
</span><span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">"</span><span class="s">link_event_filter = LEFT,RIGHT,FIXATION,FIXUPDATE,SACCADE,BLINK,BUTTON</span><span class="sh">"</span><span class="p">)</span>
<span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">"</span><span class="s">link_sample_data  = LEFT,RIGHT,GAZE,GAZERES,AREA,STATUS,HTARGET</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><h5 id="过完校准我们就可以开始实验的练习阶段了我们可以先打包一些基础的刺激绘制函数方便我们之后呈现刺激"><span class="mr-2">过完校准，我们就可以开始实验的练习阶段了。我们可以先打包一些基础的刺激绘制函数，方便我们之后呈现刺激。</span><a href="#过完校准我们就可以开始实验的练习阶段了我们可以先打包一些基础的刺激绘制函数方便我们之后呈现刺激" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
</pre><td class="rouge-code"><pre><span class="c1">## pack some basic psychopy function to shorten them
</span><span class="k">def</span> <span class="nf">display_clear</span><span class="p">():</span>
	<span class="sh">"""</span><span class="s"> clear up the screen </span><span class="sh">"""</span>
	<span class="n">surf</span><span class="p">.</span><span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">]</span>
	<span class="n">surf</span><span class="p">.</span><span class="nf">flip</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">put_txt</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
	<span class="sh">"""</span><span class="s"> Put text on display </span><span class="sh">"""</span>
	<span class="n">text_1</span> <span class="o">=</span> <span class="n">visual</span><span class="p">.</span><span class="nc">TextStim</span><span class="p">(</span><span class="n">surf</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">txt</span><span class="p">,</span>
	<span class="n">pos</span> <span class="o">=</span> <span class="n">loc</span><span class="p">,</span>
	<span class="n">color</span> <span class="o">=</span> <span class="sh">'</span><span class="s">black</span><span class="sh">'</span><span class="p">,</span>
	<span class="n">bold</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
	<span class="n">text_1</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
	<span class="n">surf</span><span class="p">.</span><span class="nf">flip</span><span class="p">()</span>
   

<span class="k">def</span> <span class="nf">draw_pic</span><span class="p">(</span><span class="n">stimuli</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">visual</span><span class="p">.</span><span class="nc">ImageStim</span><span class="p">(</span><span class="n">surf</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="n">stimuli</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="sh">'</span><span class="s">pix</span><span class="sh">'</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">V_w</span><span class="p">,</span> <span class="n">V_h</span><span class="p">),</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="p">)</span>
    <span class="n">img</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="c1"># we don't flip here in case we need to present more pics at a time
</span>    

<span class="k">def</span> <span class="nf">draw_dot</span><span class="p">(</span><span class="n">color_arr</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="n">dot</span> <span class="o">=</span> <span class="n">visual</span><span class="p">.</span><span class="nc">Circle</span><span class="p">(</span><span class="n">surf</span><span class="p">,</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">deg2pix</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="sh">'</span><span class="s">pix</span><span class="sh">'</span><span class="p">,</span> <span class="n">fillColor</span> <span class="o">=</span> <span class="n">color_arr</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="p">)</span>
    <span class="n">dot</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">surf</span><span class="p">.</span><span class="nf">flip</span><span class="p">()</span>
    
    
<span class="k">def</span> <span class="nf">driftCheck4</span><span class="p">(</span><span class="n">fix_pos</span><span class="p">,</span> <span class="n">fixDur</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">acceptableDev</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="n">deg2pix</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">This is an optional function. It</span><span class="sh">'</span><span class="s">s to make sure that the trial only starts when the eyes gazed at 
    the cue dot for long enough time (&gt;= fixDur). Use draw_dot if you don</span><span class="sh">'</span><span class="s">t need this. </span><span class="sh">'''</span> 
    <span class="c1"># fixDotX, fixDotY are the position of the fixation dot
</span>    <span class="n">event</span><span class="p">.</span><span class="nf">clearEvents</span><span class="p">()</span>  <span class="c1"># clear cached (keyboard/mouse etc.) events, if there is any
</span>    <span class="c1"># present the cue dot
</span>    <span class="n">fix</span> <span class="o">=</span> <span class="nf">draw_dot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">fix_pos</span><span class="p">)</span>
    <span class="n">fix</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">surf</span><span class="p">.</span><span class="nf">flip</span><span class="p">()</span>
    <span class="n">triggered</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">fixationStartTime</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="c1"># checks for the gaze position and calculates the gaze error in pixels from the specified fixation dot position
</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">triggered</span><span class="p">:</span>
        <span class="c1"># check if any new events are available
</span>        <span class="n">dt</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nf">getNextData</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dt</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ev</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nf">getFloatData</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">dt</span> <span class="o">==</span> <span class="n">pylink</span><span class="p">.</span><span class="n">FIXUPDATE</span><span class="p">:</span>
                <span class="c1"># update the fixation start time
</span>                <span class="k">if</span> <span class="n">fixationStartTime</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">fixationStartTime</span> <span class="o">=</span> <span class="n">ev</span><span class="p">.</span><span class="nf">getStartTime</span><span class="p">()</span>
                                    
                <span class="c1"># how much time has elapsed within the current fixation
</span>                <span class="n">fixDuration</span> <span class="o">=</span> <span class="n">ev</span><span class="p">.</span><span class="nf">getEndTime</span><span class="p">()</span> <span class="o">-</span> <span class="n">fixationStartTime</span>
                
                <span class="c1"># check if the average gaze position
</span>                <span class="n">gazeX</span><span class="p">,</span> <span class="n">gazeY</span> <span class="o">=</span> <span class="n">ev</span><span class="p">.</span><span class="nf">getAverageGaze</span><span class="p">()</span>
                <span class="n">fix</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
                <span class="c1"># # comment out this if you want to show the gaze position
</span>                <span class="c1"># fix111 = visual.Circle(surf, radius=10, units='pix', fillColor=[1, 0, 0], pos=(gazeX - pw / 2, ph / 2 - gazeY))
</span>                <span class="c1"># fix111.draw()
</span>                <span class="n">surf</span><span class="p">.</span><span class="nf">flip</span><span class="p">()</span>
                <span class="n">gazeError</span> <span class="o">=</span> <span class="nf">hypot</span><span class="p">((</span><span class="n">gazeX</span> <span class="o">-</span> <span class="n">pw</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">fix_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="n">ph</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">gazeY</span><span class="p">)</span> <span class="o">-</span> <span class="n">fix_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="c1"># trigger if the duration of the fixation is &gt; 300 ms and
</span>                <span class="c1"># the gaze position is close to the fixation dot (&lt; 30 pixels)
</span>                <span class="k">if</span> <span class="n">fixDuration</span> <span class="o">&gt;=</span> <span class="n">fixDur</span> <span class="ow">and</span> <span class="n">gazeError</span> <span class="o">&lt;</span> <span class="n">acceptableDev</span><span class="p">:</span>
                    <span class="n">triggered</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="c1">#tk.sendCommand('clear_screen 0')  # clear the host screen
</span>        <span class="c1"># check for Escape key
</span>        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nf">getKeys</span><span class="p">(</span><span class="n">keyList</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">escape</span><span class="sh">'</span><span class="p">]):</span>
            <span class="c1"># If the escape key is pressed, it initiates the eye-tracker setup and drift correction.
</span>            <span class="n">tk</span><span class="p">.</span><span class="nf">doTrackerSetup</span><span class="p">()</span>
            <span class="c1">#driftCheck(deg2pix, "6.avi")
</span>            <span class="c1">#tk.doDriftCorrect(int(fixDotX + pw / 2), int(ph / 2 - fixDotY), 1, 1)
</span>            <span class="n">tk</span><span class="p">.</span><span class="nf">doDriftCorrect</span><span class="p">(</span><span class="nf">int</span><span class="p">(</span><span class="n">pw</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">ph</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nf">startRecording</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">error</span><span class="p">:</span> <span class="k">return</span> <span class="n">error</span>
            <span class="c1">## wait for 50 ms to prevent data loss
</span>            <span class="n">pylink</span><span class="p">.</span><span class="nf">msecDelay</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
            <span class="n">tk</span><span class="p">.</span><span class="nf">sendCommand</span><span class="p">(</span><span class="sh">'</span><span class="s">clear_screen 0</span><span class="sh">'</span><span class="p">)</span>  <span class="c1"># clear the host screen
</span>    
<span class="k">def</span> <span class="nf">run_a_trial</span><span class="p">(</span><span class="n">subjInfo</span><span class="p">,</span> <span class="n">trial_info</span><span class="p">,</span> <span class="n">rec</span><span class="p">):</span>
    <span class="c1"># subjInfo include subnum, age .etc, trial_info is the conditions we have for each trial. rec: 0 equals learning phase, 1 equals experiment phase
</span>    <span class="k">if</span> <span class="n">rec</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># if it's the experiment phase, we should activate eye-tracker
</span>        <span class="c1"># force off-line mode first to prevent eyelink freeze
</span>        <span class="n">tk</span><span class="p">.</span><span class="nf">setOfflineMode</span><span class="p">()</span>
        <span class="n">pylink</span><span class="p">.</span><span class="nf">msecDelay</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="c1"># let pylink delay 40ms to prevent data loss
</span>        <span class="c1"># get the info you need for running a trail
</span>    <span class="n">cue_pos</span><span class="p">,</span> <span class="n">LoEp</span><span class="p">,</span> <span class="n">dot_pos</span><span class="p">,</span> <span class="n">stim_e</span><span class="p">,</span> <span class="n">stim_n</span> <span class="o">=</span> <span class="n">trial_info</span>
    <span class="k">if</span> <span class="n">cue_pos</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># cue_dot at the left
</span>        <span class="n">cue_loc</span><span class="o">=</span><span class="n">L_rect</span>
    <span class="k">elif</span> <span class="n">cue_pos</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># cue_dot at the right
</span>        <span class="n">cue_loc</span><span class="o">=</span><span class="n">R_rect</span>
    <span class="k">else</span><span class="p">:</span> <span class="c1"># cue dot at the center
</span>        <span class="n">cue_loc</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">LoEp</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">e_loc</span> <span class="o">=</span> <span class="n">L_rect</span>
        <span class="n">n_loc</span> <span class="o">=</span> <span class="n">R_rect</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">e_loc</span> <span class="o">=</span> <span class="n">R_rect</span>
        <span class="n">n_loc</span> <span class="o">=</span> <span class="n">L_rect</span>

    <span class="k">if</span> <span class="n">dot_pos</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">dot_loc</span> <span class="o">=</span> <span class="n">L_rect</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dot_loc</span> <span class="o">=</span> <span class="n">R_rect</span>
        
    <span class="k">if</span> <span class="n">rec</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">pylink</span><span class="p">.</span><span class="nf">msecDelay</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
        <span class="nf">driftCheck4</span><span class="p">(</span><span class="n">cue_loc</span><span class="p">)</span>
        <span class="n">tk</span><span class="p">.</span><span class="nf">sendMessage</span><span class="p">(</span><span class="sh">"</span><span class="s">check ok</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sh">"</span><span class="s">TRIALadd %d %d %d %d %s</span><span class="sh">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">Ntrial</span><span class="p">,</span> <span class="n">cue_pos</span><span class="p">,</span> <span class="n">LoEp</span><span class="p">,</span> <span class="n">dot_pos</span><span class="p">,</span> <span class="n">stim_e</span><span class="p">)</span>  <span class="c1"># The info sent to .edf corresponding to trial num, cue dot position, Location of emotional pic, pressing dot position, and emotional stim name
</span>        <span class="n">img_e</span> <span class="o">=</span> <span class="nf">draw_pic</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">d_dir_all</span><span class="p">,</span> <span class="n">stim_e</span><span class="p">),</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">e_loc</span><span class="p">)</span>
        <span class="n">img_n</span> <span class="o">=</span> <span class="nf">draw_pic</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">d_dir_all</span><span class="p">,</span> <span class="n">stim_n</span><span class="p">),</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">n_loc</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="c1"># for the learning phase
</span>        <span class="nf">draw_dot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">cue_loc</span><span class="p">)</span>
        <span class="n">core</span><span class="p">.</span><span class="nf">wait</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="nf">draw_pic</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">d_dir_learn</span><span class="p">,</span> <span class="n">stim_e</span><span class="p">),</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">e_loc</span><span class="p">)</span>
        <span class="nf">draw_pic</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">d_dir_learn</span><span class="p">,</span> <span class="n">stim_n</span><span class="p">),</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">n_loc</span><span class="p">)</span>
	<span class="n">surf</span><span class="p">.</span><span class="nf">flip</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">rec</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">img_st</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nf">trackerTime</span><span class="p">()</span>
    <span class="n">core</span><span class="p">.</span><span class="nf">wait</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rec</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">tk</span><span class="p">.</span><span class="nf">sendMessage</span><span class="p">(</span><span class="sh">"</span><span class="s">trial ok1</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">dot_st</span> <span class="o">=</span> <span class="n">core</span><span class="p">.</span><span class="nf">getTime</span><span class="p">()</span>
    <span class="nf">draw_dot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dot_loc</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="nf">waitKeys</span><span class="p">(</span><span class="mi">200000</span><span class="p">,</span> <span class="n">key_list</span><span class="p">,</span> <span class="n">timeStamped</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">rec</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">trial_data</span> <span class="o">=</span> <span class="n">subjInfo</span> <span class="o">+</span> <span class="p">[</span><span class="n">Ntrial</span><span class="p">]</span> <span class="o">+</span> <span class="n">trial_info</span> <span class="o">+</span> <span class="p">[</span><span class="n">img_st</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">dot_st</span><span class="p">]</span> <span class="o">+</span> <span class="nf">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">rec</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">trial_data</span> <span class="o">=</span> <span class="n">trial_info</span> <span class="o">+</span> <span class="nf">list</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="nf">if </span><span class="p">(</span><span class="n">trial_info</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">resp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">key_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">|</span> <span class="p">(</span><span class="n">trial_info</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">resp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">key_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">trial_data</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
    <span class="k">else</span><span class="p">:</span>
        <span class="n">trial_data</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
	<span class="k">if</span> <span class="n">rec</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">learn_data</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">trial_data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></table></code></div></div><h5 id="建立练习阶段"><span class="mr-2">建立练习阶段：</span><a href="#建立练习阶段" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre><span class="n">Ntrial</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># This is for learning phase
</span><span class="n">d_dir_learn</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">proj_root</span><span class="p">,</span> <span class="sh">'</span><span class="s">exp_stim/prac</span><span class="sh">'</span><span class="p">)</span>
<span class="n">stim_p1</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">1.bmp</span><span class="sh">'</span><span class="p">]</span>
<span class="n">stim_p2</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">2.bmp</span><span class="sh">'</span><span class="p">]</span>
<span class="n">LoEp_L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># 两张练习图片是同质的我们就不换位置了
</span><span class="n">learnlist</span> <span class="o">=</span> <span class="nf">generate_trial_list</span><span class="p">(</span><span class="n">cue_pos</span><span class="p">,</span> <span class="n">LoEp_L</span><span class="p">,</span> <span class="n">dot_pos</span><span class="p">,</span> <span class="n">stim_p1</span><span class="p">,</span> <span class="n">stim_p2</span><span class="p">)</span>

<span class="c1"># Here the L_rect means that the left pic goes 9 vis ang left away from the center of the screen
</span><span class="n">L_rect</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="n">deg2pix</span> <span class="o">*</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># lr_pos=1, rep left
</span><span class="n">R_rect</span><span class="o">=</span><span class="p">(</span><span class="n">deg2pix</span> <span class="o">*</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">learn_phase</span><span class="p">():</span>
    <span class="c1"># the loc (0,0) means the center of the screen
</span>	<span class="nf">put_txt</span><span class="p">(</span><span class="sa">u</span><span class="sh">"""</span><span class="s">現在請您練習下。 
            </span><span class="se">\n\n</span><span class="s"> 
            白色小圓圈出現時，請看它。 
            </span><span class="se">\n\n</span><span class="s"> 
            之後，兩張面孔出現，請自由觀察面孔。 
            </span><span class="se">\n\n</span><span class="s"> 
            面孔消失後會出現綠色圓圈，請判斷在屏幕左邊還是右邊
            </span><span class="se">\n\n</span><span class="s">
            如果在左邊請按 z 鍵，在右邊按 / 鍵。 
            </span><span class="se">\n\n</span><span class="s"> 
            明白後按空格鍵開始</span><span class="sh">"""</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">event</span><span class="p">.</span><span class="nf">waitKeys</span><span class="p">(</span><span class="n">keyList</span> <span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">space</span><span class="sh">'</span><span class="p">])</span>
    <span class="k">global</span> <span class="n">key_list</span>
    <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">z</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">slash</span><span class="sh">'</span><span class="p">]</span>
    <span class="nf">display_clear</span><span class="p">()</span>
    <span class="n">random</span><span class="p">.</span><span class="nf">shuffle</span><span class="p">(</span><span class="n">learnlist</span><span class="p">)</span>
    <span class="k">global</span> <span class="n">learn_data</span>
    <span class="n">learn_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">t1</span> <span class="ow">in</span> <span class="n">learnlist</span><span class="p">[:]:</span>
        <span class="k">global</span> <span class="n">Ntrial</span>
		<span class="n">Ntrial</span> <span class="o">=</span> <span class="n">Ntrial</span> <span class="o">+</span> <span class="mi">1</span>
		<span class="nf">run_a_trial</span><span class="p">(</span><span class="n">subjInfo</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="nf">display_clear</span><span class="p">()</span>
        <span class="c1"># the ITI is randomized between 1000 and 1400 ms
</span>		<span class="n">core</span><span class="p">.</span><span class="nf">wait</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">))</span>    
<span class="nf">learn_phase</span><span class="p">()</span>
<span class="n">acc</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">learn_data</span><span class="p">)</span> <span class="o">/</span> <span class="nf">len</span><span class="p">(</span><span class="n">learnlist</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nf">put_txt</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">很棒，你現在已經完成了練習階段，你的正確率是: </span><span class="se">\n\n</span><span class="s"> </span><span class="si">{</span><span class="n">acc</span><span class="si">}</span><span class="s"> %</span><span class="sh">"</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">core</span><span class="p">.</span><span class="nf">wait</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E7%A7%91%E7%A0%94/'>科研</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%E7%9C%BC%E5%8A%A8/" class="post-tag no-text-decoration" >眼动</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6%20-%20%E4%B9%BE%E5%A0%83%E9%81%93&url=https%3A%2F%2Fquentin-lam.github.io%2F%2Fposts%2F%25E5%25A6%2582%25E4%25BD%2595%25E5%25AE%2589%25E8%25A3%2585Eyelink%25E7%259C%25BC%25E5%258A%25A8%25E5%25AE%259E%25E9%25AA%258C%25E6%2589%2580%25E9%259C%2580%25E7%259A%2584%25E4%25B8%2580%25E5%2588%2587%25E7%25A1%25AC%25E4%25BB%25B6%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6%20-%20%E4%B9%BE%E5%A0%83%E9%81%93&u=https%3A%2F%2Fquentin-lam.github.io%2F%2Fposts%2F%25E5%25A6%2582%25E4%25BD%2595%25E5%25AE%2589%25E8%25A3%2585Eyelink%25E7%259C%25BC%25E5%258A%25A8%25E5%25AE%259E%25E9%25AA%258C%25E6%2589%2580%25E9%259C%2580%25E7%259A%2584%25E4%25B8%2580%25E5%2588%2587%25E7%25A1%25AC%25E4%25BB%25B6%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fquentin-lam.github.io%2F%2Fposts%2F%25E5%25A6%2582%25E4%25BD%2595%25E5%25AE%2589%25E8%25A3%2585Eyelink%25E7%259C%25BC%25E5%258A%25A8%25E5%25AE%259E%25E9%25AA%258C%25E6%2589%2580%25E9%259C%2580%25E7%259A%2584%25E4%25B8%2580%25E5%2588%2587%25E7%25A1%25AC%25E4%25BB%25B6%2F&text=%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6%20-%20%E4%B9%BE%E5%A0%83%E9%81%93" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85Eyelink%E7%9C%BC%E5%8A%A8%E5%AE%9E%E9%AA%8C%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%80%E5%88%87%E7%A1%AC%E4%BB%B6/">如何安装Eyelink眼动实验所需的一切硬件</a><li><a href="/posts/Zotero%E6%8F%92%E5%85%A5%E4%B8%AD%E6%96%87%E6%96%87%E7%8C%AE/">Zotero插入中文文献方法</a><li><a href="/posts/Dot-probe-depression-review/">【综述】A META-ANALYSIS OF THE MAGNITUDE OF BIASED ATTENTION IN DEPRESSION</a><li><a href="/posts/%E4%BD%A0%E5%A5%BD/">你好！</a><li><a href="/posts/Word%E5%BC%95%E7%94%A8%E6%96%87%E7%8C%AE%E6%96%B9%E6%B3%95/">Word引用文献方法</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/zotero/">Zotero</a> <a class="post-tag" href="/tags/markdown%E6%8F%92%E4%BB%B6/">Markdown插件</a> <a class="post-tag" href="/tags/%E4%B8%80%E5%88%87%E7%9A%84%E5%BC%80%E5%A7%8B/">一切的开始</a> <a class="post-tag" href="/tags/%E6%8A%91%E9%83%81/">抑郁</a> <a class="post-tag" href="/tags/%E7%9C%BC%E5%8A%A8/">眼动</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Zotero%E6%8F%92%E5%85%A5%E4%B8%AD%E6%96%87%E6%96%87%E7%8C%AE/"><div class="card-body"> <em class="small" data-ts="1661567640" data-df="YYYY/MM/DD" > 2022/08/27 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Zotero插入中文文献方法</h3><div class="text-muted small"><p> 先把重要的事情说三遍： 不要完全依赖软件的引用，要能自己判断引用是否正确！ 不要完全依赖软件的引用，要能自己判断引用是否正确！ 不要完全依赖软件的引用，要能自己判断引用是否正确！ 知网是大家查中文文献经常使用的网站了，这里主要讲如何把知网的文献导入到zotero中并自动生成条目方便在word中引用 首先，我们需要安装插件jasminum，其介绍如下： 通过打开这个网址点击.xpi超链...</p></div></div></a></div><div class="card"> <a href="/posts/Word%E5%BC%95%E7%94%A8%E6%96%87%E7%8C%AE%E6%96%B9%E6%B3%95/"><div class="card-body"> <em class="small" data-ts="1661856600" data-df="YYYY/MM/DD" > 2022/08/30 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Word引用文献方法</h3><div class="text-muted small"><p> 先把重要的事情说三遍： 不要完全依赖软件的引用，要能自己判断引用是否正确！ 不要完全依赖软件的引用，要能自己判断引用是否正确！ 不要完全依赖软件的引用，要能自己判断引用是否正确！ [引言] Zotero,一款爱不释手的文献管理软件 主要参考：https://zhuanlan.zhihu.com/p/30395323 Zotero作为一款完全开源的文献管理软件，和许多浏览器有良好的兼容性...</p></div></div></a></div><div class="card"> <a href="/posts/Dot-probe-depression-review/"><div class="card-body"> <em class="small" data-ts="1662288600" data-df="YYYY/MM/DD" > 2022/09/04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>【综述】A META-ANALYSIS OF THE MAGNITUDE OF BIASED ATTENTION IN DEPRESSION</h3><div class="text-muted small"><p> 作者：Andrew D. Peckham, B.A., R. Kathryn McHugh, M.A., and Michael W. Otto, Ph.D. 年份:2010 期刊:DEPRESSION AND ANXIETY DOI：10.1002/da.20755 主要结果： 对比emotional stroop task和dot probe task的效应...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Dot-probe-depression-review/" class="btn btn-outline-primary" prompt="上一篇"><p>【综述】A META-ANALYSIS OF THE MAGNITUDE OF BIASED ATTENTION IN DEPRESSION</p></a><div class="btn btn-outline-primary disabled" prompt="下一篇"><p>-</p></div></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/zotero/">Zotero</a> <a class="post-tag" href="/tags/markdown%E6%8F%92%E4%BB%B6/">Markdown插件</a> <a class="post-tag" href="/tags/%E4%B8%80%E5%88%87%E7%9A%84%E5%BC%80%E5%A7%8B/">一切的开始</a> <a class="post-tag" href="/tags/%E6%8A%91%E9%83%81/">抑郁</a> <a class="post-tag" href="/tags/%E7%9C%BC%E5%8A%A8/">眼动</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/Quentin-Lam">Quentin Lam</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0">本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> (function () { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE ? "dark" : "default"); let config = {theme: expectedTheme}; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function () { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Create mermaid tag */ $("pre").has("code.language-mermaid").each(function () { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<pre class=\"mermaid\">${svgCode}</pre>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); })(); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
